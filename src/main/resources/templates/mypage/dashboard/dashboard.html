<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{
        layout/mypage-layout :: layout(
          ~{::title},
          ~{::content},
          ~{::css},
          ~{::script}
        )
      }">

<head>
    <title th:fragment="title">ëŒ€ì‹œë³´ë“œ</title>

    <th:block th:fragment="css">
        <link rel="stylesheet" th:href="@{/css/mypage.css}">
        <link rel="stylesheet" th:href="@{/css/mypage-navbar.css}">
    </th:block>

    <th:block th:fragment="script">
        <script th:inline="javascript">
            /*<![CDATA[*/
            (function() {
                // ìº˜ë¦°ë” ë Œë”ë§ í•¨ìˆ˜
                function renderCalendar(data) {
                    if (!data || !data.year || !data.month) {
                        const now = new Date();
                        data = {
                            year: now.getFullYear(),
                            month: now.getMonth() + 1,
                            days: []
                        };
                    }
                    
                    currentCalendarYear = data.year;
                    currentCalendarMonth = data.month;
                    updateCalendarMonthDisplay();
                    
                    const calendarEl = document.getElementById('dashboard-calendar');
                    if (!calendarEl) {
                        console.error('ìº˜ë¦°ë” ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                        return;
                    }
                    
                    const year = data.year;
                    const month = data.month;
                    const days = data.days || [];
                    
                    // ë‚ ì§œë³„ ë°ì´í„°ë¥¼ ë§µìœ¼ë¡œ ë³€í™˜
                    const dayMap = new Map();
                    days.forEach(day => {
                        if (day && day.day) {
                            dayMap.set(day.day, day);
                        }
                    });
                    
                    // ì²« ë²ˆì§¸ ë‚ ì§œë¡œ Date ê°ì²´ ìƒì„±
                    const firstDay = new Date(year, month - 1, 1);
                    const lastDay = new Date(year, month, 0);
                    const daysInMonth = lastDay.getDate();
                    const startDayOfWeek = firstDay.getDay(); // 0=ì¼ìš”ì¼, 1=ì›”ìš”ì¼...
                    
                    // ìš”ì¼ í—¤ë”
                    const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
                    
                    let html = '<div class="calendar-header">';
                    dayNames.forEach(name => {
                        html += '<div class="calendar-day-header">' + name + '</div>';
                    });
                    html += '</div>';
                    
                    html += '<div class="calendar-grid">';
                    
                    // ë¹ˆ ì¹¸ ì¶”ê°€ (ì²« ì£¼ ì‹œì‘ ì „)
                    for (let i = 0; i < startDayOfWeek; i++) {
                        html += '<div class="calendar-day empty"></div>';
                    }
                    
                    // ë‚ ì§œ ì¹¸ ì¶”ê°€
                    for (let day = 1; day <= daysInMonth; day++) {
                        const dayData = dayMap.get(day);
                        const hasStudy = dayData && dayData.hasStudy === true;
                        const hasAttendance = dayData && dayData.hasAttendance === true;
                        const lectureCount = dayData && dayData.lectureCount ? dayData.lectureCount : 0;
                        const studyMinutes = dayData && dayData.studyMinutes ? dayData.studyMinutes : 0;
                        
                        let dayClass = 'calendar-day clickable-day';
                        if (hasStudy) dayClass += ' has-study';
                        if (hasAttendance) dayClass += ' has-attendance';
                        
                        let statsHtml = '';
                        if (lectureCount > 0 || studyMinutes > 0) {
                            statsHtml = '<div class="calendar-day-stats">';
                            if (lectureCount > 0) statsHtml += lectureCount + 'ê°•';
                            if (studyMinutes > 0) statsHtml += ' ' + studyMinutes + 'ë¶„';
                            statsHtml += '</div>';
                        }
                        
                        html += '<div class="' + dayClass + '" data-day="' + day + '" data-year="' + year + '" data-month="' + month + '">';
                        html += '<div class="calendar-day-number">' + day + '</div>';
                        html += statsHtml;
                        html += '</div>';
                    }
                    
                    html += '</div>';
                    
                    calendarEl.innerHTML = html;
                    bindCalendarDayClickEvents();
                }

                // ìº˜ë¦°ë” ë‚ ì§œ í´ë¦­ ì´ë²¤íŠ¸
                function bindCalendarDayClickEvents() {
                    document.querySelectorAll('.clickable-day').forEach(dayEl => {
                        dayEl.addEventListener('click', function() {
                            const year = parseInt(this.getAttribute('data-year'));
                            const month = parseInt(this.getAttribute('data-month'));
                            const day = parseInt(this.getAttribute('data-day'));
                            
                            openDayDetailModal(year, month, day);
                        });
                    });
                }

                // ìº˜ë¦°ë” ì›” ì´ë™ ë³€ìˆ˜
                let currentCalendarYear = new Date().getFullYear();
                let currentCalendarMonth = new Date().getMonth() + 1;

                // ìº˜ë¦°ë” ì›” í‘œì‹œ ì—…ë°ì´íŠ¸
                function updateCalendarMonthDisplay() {
                    const monthDisplay = document.getElementById('calendar-month-display');
                    if (monthDisplay) {
                        monthDisplay.textContent = currentCalendarMonth + 'ì›”';
                    }
                }
                
                // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰
                document.addEventListener('DOMContentLoaded', function() {
                    try {
                        const calendarData = /*[[${dashboard.calendarSummary}]]*/ null;
                        const calendarEl = document.getElementById('dashboard-calendar');
                        
                        if (calendarData && calendarData.year && calendarData.month && calendarEl) {
                            currentCalendarYear = calendarData.year;
                            currentCalendarMonth = calendarData.month;
                            updateCalendarMonthDisplay();
                            renderCalendar(calendarData);
                        } else if (calendarEl) {
                            // ë°ì´í„°ê°€ ì—†ì–´ë„ ê¸°ë³¸ ìº˜ë¦°ë” í‘œì‹œ
                            const now = new Date();
                            currentCalendarYear = now.getFullYear();
                            currentCalendarMonth = now.getMonth() + 1;
                            updateCalendarMonthDisplay();
                            renderCalendar({
                                year: currentCalendarYear,
                                month: currentCalendarMonth,
                                days: []
                            });
                        }
                    } catch (e) {
                        console.error('ìº˜ë¦°ë” ë Œë”ë§ ì˜¤ë¥˜:', e);
                    }
                });


                // ì´ˆê¸° ìº˜ë¦°ë” ë…„/ì›” ì„¤ì •
                const initialCalendarData = /*[[${dashboard.calendarSummary}]]*/ null;
                if (initialCalendarData && initialCalendarData.year && initialCalendarData.month) {
                    currentCalendarYear = initialCalendarData.year;
                    currentCalendarMonth = initialCalendarData.month;
                } else {
                    const now = new Date();
                    currentCalendarYear = now.getFullYear();
                    currentCalendarMonth = now.getMonth() + 1;
                }
                updateCalendarMonthDisplay();

                // ì¼ì¼ í•™ìŠµ ëª©í‘œ ëª¨ë‹¬ ê´€ë ¨
                const dailyGoalBtn = document.getElementById('daily-goal-btn');
                const dailyGoalModal = document.getElementById('daily-goal-modal');
                const closeModalBtn = document.getElementById('close-modal');
                const saveGoalsBtn = document.getElementById('save-goals-btn');

                // ëª¨ë‹¬ ì—´ê¸°
                if (dailyGoalBtn && dailyGoalModal) {
                    dailyGoalBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        dailyGoalModal.style.display = 'flex';
                    });
                }

                // ëª¨ë‹¬ ë‹«ê¸°
                if (closeModalBtn && dailyGoalModal) {
                    closeModalBtn.addEventListener('click', function() {
                        dailyGoalModal.style.display = 'none';
                    });
                }

                // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
                if (dailyGoalModal) {
                    dailyGoalModal.addEventListener('click', function(e) {
                        if (e.target === dailyGoalModal) {
                            dailyGoalModal.style.display = 'none';
                        }
                    });
                }

                // ëª©í‘œ ì„¹ì…˜ í† ê¸€
                document.querySelectorAll('.goal-toggle').forEach(toggle => {
                    toggle.addEventListener('click', function() {
                        const goalType = this.getAttribute('data-goal');
                        const content = document.getElementById(goalType + '-goal-content');
                        const icon = this.querySelector('.toggle-icon');
                        
                        if (content) {
                            if (content.style.display === 'none') {
                                content.style.display = 'block';
                                if (icon) icon.textContent = 'â–²';
                            } else {
                                content.style.display = 'none';
                                if (icon) icon.textContent = 'â–¼';
                            }
                        }
                    });
                });

                // ëª©í‘œ ê°’ ì¡°ì •
                document.querySelectorAll('.input-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const goalType = this.getAttribute('data-goal');
                        const input = document.getElementById(goalType + '-goal-input');
                        if (!input) return;
                        
                        const isPlus = this.classList.contains('plus-btn');
                        const isMinus = this.classList.contains('minus-btn');
                        let value = parseInt(input.value) || 0;
                        const min = parseInt(input.getAttribute('min')) || 0;
                        const max = parseInt(input.getAttribute('max')) || 100;
                        const step = parseInt(input.getAttribute('step')) || 1;

                        if (isPlus && value < max) {
                            value = Math.min(value + step, max);
                        } else if (isMinus && value > min) {
                            value = Math.max(value - step, min);
                        }

                        input.value = value;
                        updateGoalValue(goalType, value);
                        updateProgressCircle(goalType, value, max);
                    });
                });

                // ì…ë ¥ í•„ë“œ ì§ì ‘ ë³€ê²½
                ['class', 'time', 'note'].forEach(goalType => {
                    const input = document.getElementById(goalType + '-goal-input');
                    if (input) {
                        input.addEventListener('change', function() {
                            const value = parseInt(this.value) || 0;
                            const min = parseInt(this.getAttribute('min')) || 0;
                            const max = parseInt(this.getAttribute('max')) || 100;
                            const clampedValue = Math.max(min, Math.min(value, max));
                            this.value = clampedValue;
                            updateGoalValue(goalType, clampedValue);
                            updateProgressCircle(goalType, clampedValue, max);
                        });
                    }
                });

                function updateGoalValue(goalType, value) {
                    const valueEl = document.getElementById(goalType + '-goal-value');
                    if (valueEl) {
                        if (goalType === 'time') {
                            valueEl.textContent = 'í•˜ë£¨ ' + value + 'ë¶„';
                        } else {
                            valueEl.textContent = 'í•˜ë£¨ ' + value + 'ê°œ';
                        }
                    }
                }

                function updateProgressCircle(goalType, value, max) {
                    const circle = document.querySelector('#' + goalType + '-goal-content .progress-ring');
                    if (circle && max > 0) {
                        const circumference = 2 * Math.PI * 35;
                        const progress = value / max;
                        const offset = circumference * (1 - progress);
                        circle.style.strokeDashoffset = offset;
                    }
                }

                // ì €ì¥ ë²„íŠ¼
                if (saveGoalsBtn && dailyGoalModal) {
                    saveGoalsBtn.addEventListener('click', function() {
                        const classInput = document.getElementById('class-goal-input');
                        const timeInput = document.getElementById('time-goal-input');
                        const noteInput = document.getElementById('note-goal-input');
                        
                        if (classInput && timeInput && noteInput) {
                            const goals = {
                                class: parseInt(classInput.value) || 2,
                                time: parseInt(timeInput.value) || 10,
                                note: parseInt(noteInput.value) || 2
                            };
                            
                            // TODO: ì„œë²„ì— ì €ì¥í•˜ëŠ” API í˜¸ì¶œ
                            console.log('ì €ì¥í•  ëª©í‘œ:', goals);
                            alert('ì¼ì¼ í•™ìŠµ ëª©í‘œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                            dailyGoalModal.style.display = 'none';
                        }
                    });
                }

                // ë‚ ì§œë³„ íˆ´íŒ í‘œì‹œ
                function bindTooltipEvents() {
                    document.querySelectorAll('.day-tooltip-trigger').forEach(trigger => {
                        const tooltip = trigger.nextElementSibling;
                        if (!tooltip || !tooltip.classList.contains('day-tooltip')) return;
                        
                        trigger.addEventListener('mouseenter', function() {
                            tooltip.style.display = 'block';
                        });
                        
                        trigger.addEventListener('mouseleave', function() {
                            tooltip.style.display = 'none';
                        });
                    });
                }
                bindTooltipEvents();

                // ì£¼ê°„ í•™ìŠµ ì£¼ ì´ë™ ê¸°ëŠ¥
                let currentWeekOffset = 0;
                let currentWeekStart = null;

                function getWeekStart(date) {
                    const d = new Date(date);
                    const day = d.getDay();
                    const diff = d.getDate() - day + (day === 0 ? -6 : 1);
                    return new Date(d.setDate(diff));
                }

                function updateWeeklyLearning(offset) {
                    const now = new Date();
                    const targetDate = new Date(now);
                    targetDate.setDate(now.getDate() + (offset * 7));
                    
                    const startOfWeek = getWeekStart(targetDate);
                    currentWeekStart = new Date(startOfWeek);
                    
                    const year = startOfWeek.getFullYear();
                    const month = startOfWeek.getMonth() + 1;
                    const weekNumber = Math.ceil(startOfWeek.getDate() / 7);
                    
                    const weekLabelEl = document.getElementById('week-label-display');
                    if (weekLabelEl) {
                        weekLabelEl.textContent = `${year}ë…„ ${month}ì›” ${weekNumber}ì£¼ì°¨`;
                    }
                    
                    updateWeeklyCalendar(startOfWeek);
                }

                function updateWeeklyCalendar(startOfWeek) {
                    const dayNames = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
                    const weeklyCalendar = document.querySelector('.weekly-calendar');
                    if (!weeklyCalendar) return;
                    
                    let html = '';
                    for (let i = 0; i < 7; i++) {
                        const date = new Date(startOfWeek);
                        date.setDate(startOfWeek.getDate() + i);
                        const day = date.getDate();
                        const dayOfWeek = dayNames[i];
                        
                        // TODO: ì„œë²„ì—ì„œ í•´ë‹¹ ë‚ ì§œì˜ í•™ìŠµ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                        const hasStudy = i === 1;
                        const lectureCount = hasStudy ? 2 : 0;
                        const studyMinutes = hasStudy ? 45 : 0;
                        const noteCount = hasStudy ? 1 : 0;
                        
                        html += `
                            <div class="day-item">
                                <div class="day-name">${dayOfWeek}</div>
                                <div class="day-circle day-tooltip-trigger ${hasStudy ? 'has-study' : ''}" 
                                     data-day="${day}"
                                     data-day-of-week="${dayOfWeek}"
                                     data-lecture-count="${lectureCount}"
                                     data-study-minutes="${studyMinutes}"
                                     data-note-count="${noteCount}">
                                </div>
                                <div class="day-tooltip">
                                    <div class="tooltip-date">${startOfWeek.getFullYear()}. ${startOfWeek.getMonth() + 1}. ${day}. ${dayOfWeek}</div>
                                    <div class="tooltip-stats">
                                        <div class="tooltip-stat-item">
                                            <span class="tooltip-icon purple">ğŸ“</span>
                                            <span class="tooltip-label">ë…¸íŠ¸</span>
                                            <span class="tooltip-value">${noteCount}ê°œ</span>
                                        </div>
                                        <div class="tooltip-stat-item">
                                            <span class="tooltip-icon blue">ğŸ“š</span>
                                            <span class="tooltip-label">ì´ í•™ìŠµ</span>
                                            <span class="tooltip-value">${studyMinutes}ë¶„</span>
                                        </div>
                                        <div class="tooltip-stat-item">
                                            <span class="tooltip-icon teal">âœ…</span>
                                            <span class="tooltip-label">ì™„ë£Œ ìˆ˜ì—…</span>
                                            <span class="tooltip-value">${lectureCount}ê°œ</span>
                                        </div>
                                        <div class="tooltip-stat-item">
                                            <span class="tooltip-icon orange">â–¶</span>
                                            <span class="tooltip-label">ì¬ìƒ ì‹œê°„</span>
                                            <span class="tooltip-value">${studyMinutes}ë¶„</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                    weeklyCalendar.innerHTML = html;
                    bindTooltipEvents();
                }

                // ì „ ì£¼ ë²„íŠ¼
                const prevWeekBtn = document.getElementById('prev-week-btn');
                if (prevWeekBtn) {
                    prevWeekBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        currentWeekOffset--;
                        updateWeeklyLearning(currentWeekOffset);
                    });
                }

                // ë‹¤ìŒ ì£¼ ë²„íŠ¼
                const nextWeekBtn = document.getElementById('next-week-btn');
                if (nextWeekBtn) {
                    nextWeekBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        currentWeekOffset++;
                        updateWeeklyLearning(currentWeekOffset);
                    });
                }

                // ë”ë¯¸ ìº˜ë¦°ë” ë°ì´í„° ìƒì„±
                function generateDummyCalendarData(year, month) {
                    const days = [];
                    const firstDay = new Date(year, month - 1, 1);
                    const daysInMonth = new Date(year, month, 0).getDate();
                    
                    for (let day = 1; day <= daysInMonth; day++) {
                        // ëœë¤í•˜ê²Œ ì¼ë¶€ ë‚ ì§œì—ë§Œ í•™ìŠµ ë°ì´í„°
                        if (day % 3 === 0 || day === 5 || day === 12 || day === 20) {
                            days.push({
                                day: day,
                                lectureCount: Math.floor(Math.random() * 3) + 1,
                                studyMinutes: Math.floor(Math.random() * 60) + 30,
                                hasAttendance: true,
                                hasStudy: true
                            });
                        } else {
                            days.push({
                                day: day,
                                lectureCount: 0,
                                studyMinutes: 0,
                                hasAttendance: false,
                                hasStudy: false
                            });
                        }
                    }
                    
                    return {
                        year: year,
                        month: month,
                        days: days
                    };
                }

                // ì„œë²„ì—ì„œ ìº˜ë¦°ë” ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ë˜ëŠ” ë”ë¯¸ ë°ì´í„° ì‚¬ìš©)
                function loadCalendarData(year, month) {
                    // TODO: ì„œë²„ API í˜¸ì¶œ
                    // fetch(`/api/mypage/calendar?year=${year}&month=${month}`)
                    //     .then(response => response.json())
                    //     .then(data => {
                    //         renderCalendar(data);
                    //     })
                    //     .catch(error => {
                    //         console.error('ìº˜ë¦°ë” ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                    //         renderCalendar(generateDummyCalendarData(year, month));
                    //     });
                    
                    // í˜„ì¬ëŠ” ë”ë¯¸ ë°ì´í„° ì‚¬ìš©
                    const calendarData = generateDummyCalendarData(year, month);
                    renderCalendar(calendarData);
                }

                // ì „ë‹¬ ë²„íŠ¼
                const calendarPrevMonthBtn = document.getElementById('calendar-prev-month-btn');
                if (calendarPrevMonthBtn) {
                    calendarPrevMonthBtn.addEventListener('click', function() {
                        currentCalendarMonth--;
                        if (currentCalendarMonth < 1) {
                            currentCalendarMonth = 12;
                            currentCalendarYear--;
                        }
                        loadCalendarData(currentCalendarYear, currentCalendarMonth);
                    });
                }

                // ë‹¤ìŒë‹¬ ë²„íŠ¼
                const calendarNextMonthBtn = document.getElementById('calendar-next-month-btn');
                if (calendarNextMonthBtn) {
                    calendarNextMonthBtn.addEventListener('click', function() {
                        currentCalendarMonth++;
                        if (currentCalendarMonth > 12) {
                            currentCalendarMonth = 1;
                            currentCalendarYear++;
                        }
                        loadCalendarData(currentCalendarYear, currentCalendarMonth);
                    });
                }

                // ë‚ ì§œ ìƒì„¸ ëª¨ë‹¬ ì—´ê¸°
                function openDayDetailModal(year, month, day) {
                    const modal = document.getElementById('day-detail-modal');
                    const dateDisplay = document.getElementById('day-detail-date');
                    
                    if (modal && dateDisplay) {
                        // ë‚ ì§œì™€ ìš”ì¼ í‘œì‹œ
                        const date = new Date(year, month - 1, day);
                        const weekdays = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
                        const weekday = weekdays[date.getDay()];
                        dateDisplay.textContent = `${month}ì›” ${day}ì¼ ${weekday}`;
                        
                        // í• ì¼ ëª©ë¡ ì´ˆê¸°í™”
                        loadDayTodos(year, month, day);
                        // ì˜¤ëŠ˜ ìˆ˜ê°•í•œ ê°•ì˜ ëª©ë¡ ë¡œë“œ
                        loadDailyCourses(year, month, day);
                        
                        modal.style.display = 'flex';
                    }
                }

                // ë‚ ì§œ ìƒì„¸ ëª¨ë‹¬ ë‹«ê¸°
                const dayDetailModal = document.getElementById('day-detail-modal');
                if (dayDetailModal) {
                    dayDetailModal.addEventListener('click', function(e) {
                        if (e.target === dayDetailModal || e.target.id === 'day-detail-menu-btn') {
                            dayDetailModal.style.display = 'none';
                        }
                    });
                }

                // í• ì¼ ì¶”ê°€ ë²„íŠ¼ í´ë¦­
                const showTodoInputBtn = document.getElementById('show-todo-input-btn');
                const todoInputSection = document.getElementById('todo-input-section');
                const newTodoTitle = document.getElementById('new-todo-title');
                
                if (showTodoInputBtn && todoInputSection) {
                    showTodoInputBtn.addEventListener('click', function() {
                        todoInputSection.style.display = todoInputSection.style.display === 'none' ? 'block' : 'none';
                        if (newTodoTitle) {
                            newTodoTitle.focus();
                        }
                    });
                }

                // í• ì¼ ì¶”ê°€
                if (newTodoTitle) {
                    newTodoTitle.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            const text = this.value.trim();
                            if (text) {
                                // ë‚ ì§œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                                const dateDisplay = document.getElementById('day-detail-date');
                                let year = currentCalendarYear || new Date().getFullYear();
                                let month = new Date().getMonth() + 1;
                                let day = new Date().getDate();
                                
                                if (dateDisplay) {
                                    const dateText = dateDisplay.textContent;
                                    const match = dateText.match(/(\d+)ì›” (\d+)ì¼/);
                                    if (match) {
                                        month = parseInt(match[1]);
                                        day = parseInt(match[2]);
                                        year = currentCalendarYear || new Date().getFullYear();
                                    }
                                }
                                
                                const targetDate = `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                                
                                // ì„œë²„ì— ì €ì¥
                                saveTodoToServer(text, targetDate, false)
                                    .then(savedTodo => {
                                        console.log('í• ì¼ ì €ì¥ ì‘ë‹µ:', savedTodo);
                                        if (savedTodo && savedTodo.todoId) {
                                            addTodoItem(text, false, savedTodo.todoId);
                                            this.value = '';
                                            if (todoInputSection) {
                                                todoInputSection.style.display = 'none';
                                            }
                                        } else {
                                            console.error('í• ì¼ ì €ì¥ ì‘ë‹µì— todoIdê°€ ì—†ìŠµë‹ˆë‹¤:', savedTodo);
                                            alert('í• ì¼ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (todoId ì—†ìŒ)');
                                        }
                                    })
                                    .catch(error => {
                                        console.error('í• ì¼ ì¶”ê°€ ì‹¤íŒ¨:', error);
                                        alert('í• ì¼ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
                                    });
                            }
                        }
                    });
                }

                function addTodoItem(text, isCompleted = false, todoId = null) {
                    const pendingList = document.getElementById('pending-todo-list');
                    const completedList = document.getElementById('completed-todo-list');
                    
                    if (!pendingList || !completedList) return;
                    
                    const todoItem = document.createElement('div');
                    todoItem.className = 'todo-item';
                    todoItem.setAttribute('data-todo-text', text);
                    if (todoId) {
                        todoItem.setAttribute('data-todo-id', todoId);
                    }
                    
                    if (isCompleted) {
                        todoItem.innerHTML = `
                            <input type="checkbox" class="todo-checkbox" checked>
                            <span class="todo-text completed-text">${text}</span>
                        `;
                        completedList.appendChild(todoItem);
                        updateCompletedCount();
                    } else {
                        todoItem.innerHTML = `
                            <input type="checkbox" class="todo-checkbox">
                            <span class="todo-text">${text}</span>
                        `;
                        pendingList.appendChild(todoItem);
                        
                        const checkbox = todoItem.querySelector('.todo-checkbox');
                        checkbox.addEventListener('change', function() {
                            if (this.checked) {
                                const itemTodoId = todoItem.getAttribute('data-todo-id');
                                if (itemTodoId) {
                                    // ì„œë²„ì— ì™„ë£Œ ì²˜ë¦¬ ìš”ì²­
                                    completeTodoOnServer(itemTodoId, true);
                                }
                                moveTodoToCompleted(text, itemTodoId);
                                todoItem.remove();
                            }
                        });
                    }
                }
                
                // API í˜¸ì¶œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
                function apiCall(url, options = {}) {
                    return fetch(url, {
                        method: options.method || 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                            ...options.headers
                        },
                        body: options.body ? JSON.stringify(options.body) : undefined
                    })
                    .then(response => {
                        return response.json().then(data => {
                            // ì‘ë‹µì´ success: falseì¸ ê²½ìš° ì—ëŸ¬ ì²˜ë¦¬
                            if (data.success === false) {
                                throw new Error(data.error || options.errorMessage || 'ìš”ì²­ ì‹¤íŒ¨');
                            }
                            if (!response.ok) {
                                throw new Error(data.error || options.errorMessage || 'ìš”ì²­ ì‹¤íŒ¨');
                            }
                            return data;
                        });
                    })
                    .then(data => {
                        if (options.successMessage) {
                            console.log(options.successMessage, data);
                        }
                        return options.dataPath ? data[options.dataPath] : data;
                    })
                    .catch(error => {
                        console.error(options.errorMessage || 'ìš”ì²­ ì‹¤íŒ¨', error);
                        throw error;
                    });
                }
                
                // ì„œë²„ì— í• ì¼ ì €ì¥
                function saveTodoToServer(title, targetDate, isCompleted = false) {
                    console.log('í• ì¼ ì €ì¥ ìš”ì²­:', { title, targetDate, isCompleted });
                    return apiCall('/mypage/todos/save', {
                        method: 'POST',
                        body: { title, targetDate, isCompleted },
                        dataPath: 'todo',
                        successMessage: 'í• ì¼ ì €ì¥ ì„±ê³µ',
                        errorMessage: 'í• ì¼ ì €ì¥ ì‹¤íŒ¨'
                    });
                }
                
                // ì„œë²„ì— í• ì¼ ì™„ë£Œ ì²˜ë¦¬
                function completeTodoOnServer(todoId, isCompleted) {
                    return apiCall(`/mypage/todos/${todoId}/complete?completed=${isCompleted}`, {
                        method: 'PUT',
                        dataPath: 'todo',
                        successMessage: 'í• ì¼ ì™„ë£Œ ì²˜ë¦¬ ì„±ê³µ',
                        errorMessage: 'í• ì¼ ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨'
                    });
                }

                function moveTodoToCompleted(text, todoId = null) {
                    const completedList = document.getElementById('completed-todo-list');
                    if (!completedList) return;
                    
                    // í˜„ì¬ ëª¨ë‹¬ì˜ ë‚ ì§œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                    const dateDisplay = document.getElementById('day-detail-date');
                    let dateStr = '';
                    if (dateDisplay) {
                        const dateText = dateDisplay.textContent;
                        const match = dateText.match(/(\d+)ì›” (\d+)ì¼/);
                        if (match) {
                            const month = parseInt(match[1]);
                            const day = parseInt(match[2]);
                            const date = new Date(currentCalendarYear || new Date().getFullYear(), month - 1, day);
                            const weekdays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
                            dateStr = `${month}ì›” ${day}ì¼ (${weekdays[date.getDay()]})`;
                        }
                    }
                    
                    if (!dateStr) {
                        const now = new Date();
                        dateStr = `${now.getMonth() + 1}ì›” ${now.getDate()}ì¼ (${['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][now.getDay()]})`;
                    }
                    
                    const completedItem = document.createElement('div');
                    completedItem.className = 'todo-item completed-todo-item';
                    completedItem.setAttribute('data-todo-text', text);
                    if (todoId) {
                        completedItem.setAttribute('data-todo-id', todoId);
                    }
                    completedItem.innerHTML = `
                        <input type="checkbox" class="todo-checkbox" checked>
                        <div class="todo-content">
                            <span class="todo-text completed-text">${text}</span>
                            <div class="completed-date">ì™„ë£Œì¼: ${dateStr}</div>
                        </div>
                    `;
                    
                    completedList.appendChild(completedItem);
                    updateCompletedCount();
                }

                function updateCompletedCount() {
                    const completedList = document.getElementById('completed-todo-list');
                    const countElement = document.getElementById('completed-count');
                    if (completedList && countElement) {
                        const count = completedList.querySelectorAll('.todo-item').length;
                        countElement.textContent = count;
                    }
                }

                // ì™„ë£Œëœ í• ì¼ ì„¹ì…˜ ì ‘ê¸°/í¼ì¹˜ê¸°
                const completedHeader = document.getElementById('completed-header');
                const completedList = document.getElementById('completed-todo-list');
                
                if (completedHeader && completedList) {
                    completedHeader.addEventListener('click', function() {
                        const isHidden = completedList.style.display === 'none';
                        completedList.style.display = isHidden ? 'block' : 'none';
                        const toggleIcon = this.querySelector('.completed-toggle-icon');
                        if (toggleIcon) {
                            toggleIcon.textContent = isHidden ? 'â–¼' : 'â–¶';
                        }
                    });
                }

                // í• ì¼ ë¡œë“œ (ì„œë²„ì—ì„œ)
                function loadDayTodos(year, month, day) {
                    const pendingList = document.getElementById('pending-todo-list');
                    const completedList = document.getElementById('completed-todo-list');
                    
                    if (pendingList) pendingList.innerHTML = '';
                    if (completedList) completedList.innerHTML = '';
                    
                    apiCall(`/mypage/todos/list?year=${year}&month=${month}&day=${day}`, {
                        errorMessage: 'í• ì¼ ë¡œë“œ ì‹¤íŒ¨'
                    })
                    .then(todos => {
                        todos.forEach(todo => {
                            addTodoItem(todo.title, todo.isCompleted, todo.todoId);
                        });
                    })
                    .catch(() => {
                        // ì—ëŸ¬ ë°œìƒ ì‹œ ë¹ˆ ëª©ë¡ í‘œì‹œ
                    });
                }
                

                // ì˜¤ëŠ˜ ìˆ˜ê°•í•œ ê°•ì˜ ëª©ë¡ ë¡œë“œ
                function loadDailyCourses(year, month, day) {
                    const coursesList = document.getElementById('daily-courses-list');
                    if (!coursesList) return;
                    
                    coursesList.innerHTML = '';
                    
                    // TODO: ì„œë²„ API í˜¸ì¶œí•˜ì—¬ ê°•ì˜ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
                    // í˜„ì¬ëŠ” ë¹ˆ ëª©ë¡ í‘œì‹œ
                    coursesList.innerHTML = '<p class="empty-courses">ì˜¤ëŠ˜ ìˆ˜ê°•í•œ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                }

            })();
            /*]]>*/
        </script>
    </th:block>
</head>

<body>

<div th:fragment="content">

    <h1 class="dashboard-title">ëŒ€ì‹œë³´ë“œ</h1>

    <div class="mypage-dashboard">
        <!-- ìµœê·¼ í•™ìŠµ ê°•ì˜ -->
        <section class="card card-large recent-course-card">
            <div class="card-header">
            <h2>ìµœê·¼ í•™ìŠµ ê°•ì˜</h2>
                <a th:href="@{/mypage/courses}" class="view-all-link">í•™ìŠµ ëª©ë¡ ></a>
            </div>
            <div class="recent-course-content" th:if="${dashboard.recentCourse}">
                <div class="course-icon">
                    <div class="play-icon">â–¶</div>
                </div>
                <div class="course-info">
                    <h3 class="course-title" th:text="${dashboard.recentCourse != null ? dashboard.recentCourse.title : 'í•™ìŠµ ì¤‘ì¸ ê°•ì˜ ì—†ìŒ'}">ìŠ¤í”„ë§ë¶€íŠ¸ ì…ë¬¸</h3>
                    <div class="course-progress">
                        <span class="progress-text" th:if="${dashboard.recentCourse != null}">
                            <span th:text="${dashboard.recentCourse.currentLecture != null ? dashboard.recentCourse.currentLecture : 0}">1</span>ê°• / 
                            <span th:if="${dashboard.recentCourse.totalLectures != null and dashboard.recentCourse.totalLectures > 0}" 
                                  th:text="${dashboard.recentCourse.totalLectures}">10</span>
                            <span th:unless="${dashboard.recentCourse.totalLectures != null and dashboard.recentCourse.totalLectures > 0}">-</span>ê°• 
                            <span th:if="${dashboard.recentCourse.totalLectures != null and dashboard.recentCourse.totalLectures > 0}">
                                (<span th:text="${dashboard.recentCourse.progressRate != null ? #numbers.formatDecimal(dashboard.recentCourse.progressRate, 1, 2) : '0.00'}">10.00</span>%)
                            </span>
                            <span th:unless="${dashboard.recentCourse.totalLectures != null and dashboard.recentCourse.totalLectures > 0}">
                                (-%)
                            </span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="recent-course-content" th:unless="${dashboard.recentCourse}">
                <p class="empty-message">í•™ìŠµ ì¤‘ì¸ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
            </div>
        </section>

        <!-- ì£¼ê°„ í•™ìŠµ -->
        <section class="card card-small weekly-learning-card">
            <div class="card-header">
            <h2>ì£¼ê°„ í•™ìŠµ</h2>
                <button class="icon-btn" id="daily-goal-btn" title="ì¼ì¼ í•™ìŠµ ëª©í‘œ ì„¤ì •">
                    <span class="gear-icon">âš™</span>
                </button>
            </div>
            <div class="weekly-content" th:if="${dashboard.weeklyLearning}">
                <div class="week-navigation">
                    <button class="nav-btn prev-week" id="prev-week-btn">â€¹</button>
                    <div class="week-label" id="week-label-display" th:text="${dashboard.weeklyLearning.weekLabel}">25ë…„ 12ì›” 3ì£¼ì°¨</div>
                    <button class="nav-btn next-week" id="next-week-btn">â€º</button>
                </div>
                <div class="weekly-calendar">
                    <div class="day-item" th:each="daily, iterStat : ${dashboard.weeklyLearning.dailyLearnings}">
                        <div class="day-name" th:text="${daily.dayOfWeek}">ì›”</div>
                        <div class="day-circle day-tooltip-trigger" 
                             th:classappend="${daily.hasStudy} ? 'has-study' : ''"
                             th:attr="data-day=${daily.day != null ? daily.day : 0},
                                      data-day-of-week=${daily.dayOfWeek != null ? daily.dayOfWeek : ''},
                                      data-lecture-count=${daily.lectureCount != null ? daily.lectureCount : 0},
                                      data-study-minutes=${daily.studyMinutes != null ? daily.studyMinutes : 0},
                                      data-note-count=${daily.noteCount != null ? daily.noteCount : 0}">
                        </div>
                        <!-- ë‚ ì§œë³„ ìƒì„¸ ì •ë³´ íˆ´íŒ -->
                        <div class="day-tooltip">
                            <div class="tooltip-date" 
                                 th:text="${dashboard.weeklyLearning.year} + '. ' + ${dashboard.weeklyLearning.month} + '. ' + ${daily.day != null ? daily.day : 0} + '. ' + ${daily.dayOfWeek != null ? daily.dayOfWeek : ''}">
                                2025. 12. 17. ìˆ˜
                            </div>
                            <div class="tooltip-stats">
                                <div class="tooltip-stat-item">
                                    <span class="tooltip-icon purple">ğŸ“</span>
                                    <span class="tooltip-label">ë…¸íŠ¸</span>
                                    <span class="tooltip-value" th:text="${daily.noteCount != null ? daily.noteCount : 0} + 'ê°œ'">0ê°œ</span>
                                </div>
                                <div class="tooltip-stat-item">
                                    <span class="tooltip-icon blue">ğŸ“š</span>
                                    <span class="tooltip-label">ì´ í•™ìŠµ</span>
                                    <span class="tooltip-value" th:text="${daily.studyMinutes != null ? daily.studyMinutes : 0} + 'ë¶„'">0ë¶„</span>
                                </div>
                                <div class="tooltip-stat-item">
                                    <span class="tooltip-icon teal">âœ…</span>
                                    <span class="tooltip-label">ì™„ë£Œ ìˆ˜ì—…</span>
                                    <span class="tooltip-value" th:text="${daily.lectureCount != null ? daily.lectureCount : 0} + 'ê°œ'">0ê°œ</span>
                                </div>
                                <div class="tooltip-stat-item">
                                    <span class="tooltip-icon orange">â–¶</span>
                                    <span class="tooltip-label">ì¬ìƒ ì‹œê°„</span>
                                    <span class="tooltip-value" th:text="${daily.studyMinutes != null ? daily.studyMinutes : 0} + 'ë¶„'">0ë¶„</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="weekly-stats">
                    <div class="stat-item">
                        <span class="stat-icon">â–¶</span>
                        <span class="stat-value" th:text="${dashboard.weeklyLearning.totalLectures}">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">ğŸ•</span>
                        <span class="stat-value" th:text="${dashboard.weeklyLearning.totalMinutes} + 'ë¶„'">0ë¶„</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">ğŸ“„</span>
                        <span class="stat-value" th:text="${dashboard.weeklyLearning.totalNotes}">0</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ì¼ì¼ í•™ìŠµ ëª©í‘œ ëª¨ë‹¬ -->
        <div class="modal-overlay" id="daily-goal-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ì¼ì¼ í•™ìŠµ ëª©í‘œ</h2>
                    <button class="modal-close" id="close-modal">Ã—</button>
                </div>
                <div class="modal-body">
                    <p class="modal-info">
                        ì„¤ì •í•œ ì¼ì¼ í•™ìŠµ ëª©í‘œëŠ” ì´ë²ˆ ì£¼ë¶€í„° ë°˜ì˜ë©ë‹ˆë‹¤.<br>
                        í•™ìŠµ ëª©í‘œëŠ” ì–¸ì œë“  ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>

                    <!-- ì™„ë£Œ ìˆ˜ì—… ëª©í‘œ -->
                    <div class="goal-section">
                        <div class="goal-header">
                            <span class="goal-title">ì™„ë£Œ ìˆ˜ì—… ëª©í‘œ</span>
                            <span class="goal-value" id="class-goal-value">í•˜ë£¨ 2ê°œ</span>
                            <button class="goal-toggle" data-goal="class">
                                <span class="toggle-icon">â–¼</span>
                            </button>
                        </div>
                        <div class="goal-content" id="class-goal-content" style="display: none;">
                            <div class="goal-controls">
                                <div class="progress-circle">
                                    <svg width="80" height="80">
                                        <circle cx="40" cy="40" r="35" fill="none" stroke="#e0e0e0" stroke-width="6"/>
                                        <circle cx="40" cy="40" r="35" fill="none" stroke="#0A4A7A" stroke-width="6" 
                                                stroke-dasharray="220" stroke-dashoffset="110" class="progress-ring"/>
                                    </svg>
                                </div>
                                <div class="goal-input-group">
                                    <button class="input-btn minus-btn" data-goal="class">âˆ’</button>
                                    <input type="number" class="goal-input" id="class-goal-input" value="2" min="1" max="10">
                                    <button class="input-btn plus-btn" data-goal="class">+</button>
                                </div>
                            </div>
                            <div class="goal-alert">
                                <span class="alert-icon">âš </span>
                                <span>í‰ì†Œ í•™ìŠµëŸ‰ì„ ê¸°ì¤€ìœ¼ë¡œ ë„ì „ì ì¸ ëª©í‘œë¥¼ ì„¤ì •í•˜ì„¸ìš”.</span>
                            </div>
                        </div>
                    </div>

                    <hr class="goal-divider">

                    <!-- í•™ìŠµì‹œê°„ ëª©í‘œ -->
                    <div class="goal-section">
                        <div class="goal-header">
                            <span class="goal-title">í•™ìŠµì‹œê°„ ëª©í‘œ</span>
                            <span class="goal-value" id="time-goal-value">í•˜ë£¨ 10ë¶„</span>
                            <button class="goal-toggle" data-goal="time">
                                <span class="toggle-icon">â–¼</span>
                            </button>
                        </div>
                        <div class="goal-content" id="time-goal-content" style="display: none;">
                            <div class="goal-controls">
                                <div class="progress-circle">
                                    <svg width="80" height="80">
                                        <circle cx="40" cy="40" r="35" fill="none" stroke="#e0e0e0" stroke-width="6"/>
                                        <circle cx="40" cy="40" r="35" fill="none" stroke="#0A4A7A" stroke-width="6" 
                                                stroke-dasharray="220" stroke-dashoffset="110" class="progress-ring"/>
                                    </svg>
                                </div>
                                <div class="goal-input-group">
                                    <button class="input-btn minus-btn" data-goal="time">âˆ’</button>
                                    <input type="number" class="goal-input" id="time-goal-input" value="10" min="10" max="300" step="10">
                                    <button class="input-btn plus-btn" data-goal="time">+</button>
                                </div>
                            </div>
                            <div class="goal-alert">
                                <span class="alert-icon">âš </span>
                                <span>í•™ìŠµ ì‹œê°„ì€ í•˜ë£¨ ìµœì†Œ 10ë¶„ ì´ìƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.</span>
                            </div>
                        </div>
                    </div>

                    <hr class="goal-divider">

                    <!-- ë…¸íŠ¸ ì‘ì„± ëª©í‘œ -->
                    <div class="goal-section">
                        <div class="goal-header">
                            <span class="goal-title">ë…¸íŠ¸ ì‘ì„± ëª©í‘œ</span>
                            <span class="goal-value" id="note-goal-value">í•˜ë£¨ 2ê°œ</span>
                            <button class="goal-toggle" data-goal="note">
                                <span class="toggle-icon">â–¼</span>
                            </button>
                        </div>
                        <div class="goal-content" id="note-goal-content" style="display: none;">
                            <div class="goal-controls">
                                <div class="progress-circle">
                                    <svg width="80" height="80">
                                        <circle cx="40" cy="40" r="35" fill="none" stroke="#e0e0e0" stroke-width="6"/>
                                        <circle cx="40" cy="40" r="35" fill="none" stroke="#9C27B0" stroke-width="6" 
                                                stroke-dasharray="220" stroke-dashoffset="110" class="progress-ring"/>
                                    </svg>
                                </div>
                                <div class="goal-input-group">
                                    <button class="input-btn minus-btn" data-goal="note">âˆ’</button>
                                    <input type="number" class="goal-input" id="note-goal-input" value="2" min="1" max="10">
                                    <button class="input-btn plus-btn" data-goal="note">+</button>
                                </div>
                            </div>
                            <div class="goal-alert">
                                <span class="alert-icon">âš </span>
                                <span>ê¸°ì–µì— ì˜ì¡´í•˜ì§€ ë§ˆì„¸ìš”. í•„ê¸°ë„ ìŠµê´€ì…ë‹ˆë‹¤.</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="save-btn" id="save-goals-btn">ì €ì¥í•˜ê¸°</button>
                </div>
            </div>
        </div>

        <!-- ìˆ˜ë£Œì¦ -->
        <section class="card card-small certificate-card">
            <div class="card-header">
            <h2>ìˆ˜ë£Œì¦</h2>
                <a th:href="@{/mypage/certificates}" class="view-all-link">ì „ì²´ ë³´ê¸° ></a>
            </div>
            <div class="certificate-content" th:if="${dashboard.latestCertificate}">
                <div class="certificate-item">
                    <div class="certificate-icon">ğŸ“œ</div>
                    <div class="certificate-info">
                        <div class="certificate-title" th:text="${dashboard.latestCertificate.courseTitle}">ì´ˆë³´ìë¥¼ ìœ„í•œ íŒŒì›Œí¬ì¸íŠ¸</div>
                        <div class="certificate-date" th:text="${#temporals.format(dashboard.latestCertificate.issuedDate, 'yyyy. MM. dd.')}">2024. 07. 30.</div>
                    </div>
                </div>
            </div>
            <div class="certificate-content" th:unless="${dashboard.latestCertificate}">
                <p class="empty-message">ìˆ˜ë£Œì¦ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            </div>
        </section>

        <!-- ìº˜ë¦°ë” -->
        <section class="card card-large calendar-card">
            <div class="calendar-header-section">
                <button class="calendar-nav-btn" id="calendar-prev-month-btn">â€¹</button>
                <h2 id="calendar-month-display">12ì›”</h2>
                <button class="calendar-nav-btn" id="calendar-next-month-btn">â€º</button>
            </div>
            <div id="dashboard-calendar" 
                 th:data-year="${dashboard.calendarSummary != null ? dashboard.calendarSummary.year : null}"
                 th:data-month="${dashboard.calendarSummary != null ? dashboard.calendarSummary.month : null}">
                <!-- ìº˜ë¦°ë”ëŠ” JavaScriptë¡œ ë Œë”ë§ -->
            </div>
        </section>

        <!-- ë‚ ì§œ ìƒì„¸ ëª¨ë‹¬ -->
        <div class="modal-overlay" id="day-detail-modal">
            <div class="modal-content day-detail-modal-content">
                <div class="modal-header todo-header">
                    <h2 id="day-detail-date">12ì›” 12ì¼ ê¸ˆìš”ì¼</h2>
                    <button class="modal-menu-btn" id="day-detail-menu-btn">â‹®</button>
                </div>
                <div class="modal-body todo-body">
                    <!-- í• ì¼ ì¶”ê°€ ë²„íŠ¼ -->
                    <button class="add-todo-btn" id="show-todo-input-btn">
                        <span class="check-icon">âœ“</span>
                        <span>í• ì¼ ì¶”ê°€</span>
                    </button>

                    <!-- í• ì¼ ì…ë ¥ ì˜ì—­ (ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€) -->
                    <div class="todo-input-section" id="todo-input-section" style="display: none;">
                        <div class="todo-input-item">
                            <input type="checkbox" class="todo-checkbox-input" id="new-todo-checkbox">
                            <div class="todo-input-content">
                                <input type="text" class="todo-title-input" id="new-todo-title" placeholder="ì œëª©">
                                <div class="todo-details-row">
                                    <span class="todo-details-icon">â˜°</span>
                                    <span class="todo-details-text">ì„¸ë¶€ì •ë³´</span>
                                </div>
                                <div class="todo-date-buttons">
                                    <button class="todo-date-btn" data-date="today">ì˜¤ëŠ˜</button>
                                    <button class="todo-date-btn" data-date="tomorrow">ë‚´ì¼</button>
                                    <button class="todo-date-btn" id="todo-calendar-btn">ğŸ“…</button>
                                    <button class="todo-reorder-btn">â‡…</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ë¯¸ì™„ë£Œ í• ì¼ ëª©ë¡ -->
                    <div class="todo-pending-section">
                        <div class="todo-list" id="pending-todo-list">
                            <!-- ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
                        </div>
                    </div>

                    <!-- ì™„ë£Œëœ í• ì¼ ì„¹ì…˜ -->
                    <div class="todo-completed-section">
                        <div class="completed-header" id="completed-header">
                            <span class="completed-toggle-icon">â–¼</span>
                            <h3 class="completed-title">ì™„ë£Œë¨(<span id="completed-count">0</span>ê°œ)</h3>
                        </div>
                        <div class="completed-list" id="completed-todo-list" style="display: none;">
                            <!-- ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
                        </div>
                    </div>

                    <!-- ì˜¤ëŠ˜ ìˆ˜ê°•í•œ ê°•ì˜ ëª©ë¡ -->
                    <div class="daily-courses-section">
                        <h3 class="courses-section-title">ì˜¤ëŠ˜ ìˆ˜ê°•í•œ ê°•ì˜</h3>
                        <div class="courses-list" id="daily-courses-list">
                            <!-- ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

</body>
</html>


<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/admin-layout :: layout(~{::title}, ~{::content}, ~{::css}, ~{::script})}">

<head>
    <title th:fragment="title">관리자 - 권한 관리</title>

    <th:block th:fragment="css">
        <link rel="stylesheet" th:href="@{/css/admin/adminUserTab.css}">
        <!-- ROLE 전용 CSS (없으면 새로 만들거나 기존 role css 연결) -->
        <link rel="stylesheet" th:href="@{/css/admin/adminUser.css}">
    </th:block>
</head>

<body>

<div th:fragment="content" class="admin-role">

    <!-- ✅ 쿠폰 페이지처럼 탭 fragment 호출 -->
    <th:block th:replace="admin/fragments/adminUserTab :: tab('user')" />

    <!-- ===============================
         1. 회원 검색 / 초기화
    ================================ -->
    <section class="role-section">
        <h2 class="section-title">회원 검색</h2>

        <div class="admin-role-toolbar">
            <div class="admin-role-search">
                <select id="searchType">
                    <option value="email">메일</option>
                    <option value="name">이름</option>
                    <option value="userId">회원ID</option>
                </select>
                <input id="searchKeyword" placeholder="검색어 입력" />
                <button id="btnSearch" type="button">검색</button>
            </div>

            <div class="admin-role-actions">
                <button id="btnResetAll" type="button" class="btn-reset">
                    검색/필터 초기화
                </button>
            </div>
        </div>

        <div id="appliedFilters" class="applied-filters" aria-live="polite"></div>
    </section>

    <!-- ===============================
         2. 회원 목록
    ================================ -->
    <section class="role-section">
        <h2 class="section-title">회원 목록</h2>

        <div class="table-wrapper">
            <table class="admin-role-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>이름</th>
                    <th>이메일</th>
                    <th>가입구분</th>

                    <th class="th-filter">
                        상태
                        <button type="button" class="filter-btn" data-filter="status" aria-label="상태 필터">▾</button>
                        <div class="filter-popup" id="statusFilterPopup"></div>
                    </th>

                    <th class="th-filter">
                        권한
                        <button type="button" class="filter-btn" data-filter="role" aria-label="권한 필터">▾</button>
                        <div class="filter-popup" id="roleFilterPopup"></div>
                    </th>
                </tr>
                </thead>
                <tbody id="userTbody"></tbody>
            </table>
        </div>

        <div id="pagination" class="admin-pagination"></div>
        <div id="totalCount" class="admin-total-count"></div>
    </section>

</div>

<th:block th:fragment="script">
    <script th:src="@{/js/admin/adminUserRole.js}"></script>
</th:block>

</body>
</html>

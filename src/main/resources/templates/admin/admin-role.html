<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/admin-layout :: layout(~{::title}, ~{::content}, ~{::css}, ~{::script})}">

<head>
    <title th:fragment="title">관리자 - 권한 관리</title>

    <th:block th:fragment="css">
        <!-- coupon 페이지처럼 공통 탭 css 포함 -->
        <link rel="stylesheet" th:href="@{/css/admin/adminUser-tab.css}">
        <!-- role 전용 css (없으면 만들어도 되고, 기존 role css 있으면 그걸로) -->
        <link rel="stylesheet" th:href="@{/css/admin/admin-role.css}">
    </th:block>
</head>

<body>

<div th:fragment="content" class="admin-role-page">

    <!-- ✅ coupon 페이지와 동일 패턴: 탭 fragment 호출 -->
    <th:block th:replace="admin/adminUser-tab :: tab('role')" />

    <!-- ===============================
         1. 회원 검색 / 필터
    ================================ -->
    <section class="role-section">
        <h2 class="section-title">회원 검색</h2>

        <!-- ✅ 검색 + 초기화 툴바 (기존 adminUser-tab.html 내용 그대로 이식) -->
        <div class="admin-role-toolbar">
            <div class="admin-role-search">
                <select id="searchType">
                    <option value="email">메일</option>
                    <option value="name">이름</option>
                    <option value="userId">회원ID</option>
                </select>
                <input id="searchKeyword" placeholder="검색어 입력" />
                <button id="btnSearch" type="button">검색</button>
            </div>

            <div class="admin-role-actions">
                <button id="btnResetAll" type="button" class="btn-reset">
                    검색/필터 초기화
                </button>
            </div>
        </div>

        <!-- ✅ 현재 적용중인 검색/필터 표시 칩 -->
        <div id="appliedFilters" class="applied-filters" aria-live="polite"></div>
    </section>

    <!-- ===============================
         2. 회원 목록
    ================================ -->
    <section class="role-section">
        <h2 class="section-title">회원 목록</h2>

        <div class="table-wrapper">
            <table class="admin-role-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>이름</th>
                    <th>이메일</th>

                    <th class="th-filter">
                        상태
                        <button type="button" class="filter-btn" data-filter="status" aria-label="상태 필터">▾</button>
                        <div class="filter-popup" id="statusFilterPopup"></div>
                    </th>

                    <th class="th-filter">
                        권한
                        <button type="button" class="filter-btn" data-filter="role" aria-label="권한 필터">▾</button>
                        <div class="filter-popup" id="roleFilterPopup"></div>
                    </th>
                </tr>
                </thead>
                <tbody id="userTbody"></tbody>
            </table>
        </div>

        <div id="pagination" class="admin-pagination"></div>
        <div id="totalCount" class="admin-total-count"></div>
    </section>

</div>

<th:block th:fragment="script">
    <!-- ✅ coupon 페이지처럼 page에서 JS 로드 -->
    <script th:src="@{/js/admin/userrole/admin-user-role.js}"></script>
</th:block>

</body>
</html>

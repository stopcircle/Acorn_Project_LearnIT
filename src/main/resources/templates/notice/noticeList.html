<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout :: layout(~{::title}, ~{::content}, ~{::css}, ~{})}">
<th:block th:fragment="css">
    <link rel="stylesheet" th:href="@{/css/notice/notice.css}">
</th:block>
<head>
    <title th:fragment="title">공지사항</title>
</head>

<body>
<div th:fragment="content">

    <section class="notice-page container">
        <h1 class="notice-title">공지사항</h1>

        <div class="notice-table-wrap">
            <table class="notice-table">
                <thead>
                <tr>
                    <th class="col-no">구분</th>
                    <th class="col-title">제목</th>
                    <th class="col-date">작성일자</th>
                    <th class="col-writer">작성자</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="n : ${notices}">
                    <td>
                        <span class="col-category-text"
                              th:text="${n.category}"
                              th:classappend="${n.category == '긴급'} ? ' is-urgent' :
                                              (${n.category == '이벤트'} ? ' is-event' : ' is-normal')">
                        </span>
                    </td>

                    <td class="td-title">
                        <a th:href="@{'/notice/' + ${n.noticeId}}">
                            <span th:text="${n.title}">제목</span>
                        </a>
                    </td>

                    <td class="col-date" th:text="${#dates.format(n.createdAt, 'yyyy-MM-dd')}">2025-12-17</td>
                    <td class="col-writer" th:text="${n.userId == 4 ? '관리자' : n.userId}">관리자</td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- ✅ 블록 페이지네이션 -->
        <nav class="pagination" aria-label="공지사항 페이지네이션" th:if="${totalPages > 1}">

            <!-- 이전 블록 («) -->
            <a class="page-btn"
               th:if="${prevBlockPage != null}"
               th:href="@{/notice(page=${prevBlockPage})}"
               aria-label="이전 페이지 블록">
                «
            </a>

            <!-- 현재 블록 (1~5 / 6~10 ...) -->
            <a class="page-num"
               th:each="p : ${#numbers.sequence(startPage, endPage)}"
               th:classappend="${p == currentPage} ? ' is-active' : ''"
               th:href="@{/notice(page=${p})}"
               th:text="${p}">1</a>

            <!-- 다음 블록 (») -->
            <a class="page-btn"
               th:if="${nextBlockPage != null}"
               th:href="@{/notice(page=${nextBlockPage})}"
               aria-label="다음 페이지 블록">
                »
            </a>

        </nav>

    </section>

</div>
</body>
</html>

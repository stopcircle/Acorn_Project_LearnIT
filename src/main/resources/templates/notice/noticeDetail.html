<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout :: layout(~{::title}, ~{::content}, ~{::css}, ~{})}">

<th:block th:fragment="css">
    <link rel="stylesheet" th:href="@{/css/notice/notice.css}">
</th:block>

<head>
    <title th:fragment="title">공지사항 상세</title>
</head>

<body>
<div th:fragment="content">

    <section class="notice-page container">
        <h1 class="notice-title">공지사항</h1>

        <div class="notice-detail-wrap">

            <div class="notice-detail-header">
                <span class="col-category-text"
                      th:text="${notice.category}"
                      th:classappend="
                        ${notice.category == '긴급'} ? ' is-urgent' :
                        (${notice.category == '이벤트'} ? ' is-event' : ' is-normal')
                      ">
                </span>

                <div class="notice-detail-title" th:text="${notice.title}"></div>

                <div class="notice-detail-meta">
                    <span th:text="${'작성일자 | ' + #dates.format(notice.createdAt, 'yyyy.MM.dd')}"></span>
                </div>
            </div>

            <div class="notice-detail-divider"></div>

            <div class="notice-detail-content" th:text="${notice.content}"></div>

            <!-- 첨부파일 -->
            <div class="notice-attach"
                 th:if="${notice.fileUrl != null and !#strings.isEmpty(notice.fileUrl)}">

                <a class="notice-attach-link"
                   th:href="@{/notice/{id}/download(id=${notice.noticeId})}">
                    첨부파일 다운로드
                </a>

                <span th:text="${notice.originalFileName != null ? notice.originalFileName : '첨부파일'}"></span>
            </div>

            <div class="notice-detail-actions">
                <!-- ✅ 관리자에서 왔으면 관리자 목록으로, 아니면 사용자 목록으로 -->
                <a class="notice-back-btn"
                   th:if="${from == 'admin'}"
                   th:href="@{/admin/notice(
                                page=${returnPage},
                                size=${returnSize},
                                category=${returnCategory},
                                search=${returnSearch}
                             )}">
                    목록 보기
                </a>

                <a class="notice-back-btn"
                   th:unless="${from == 'admin'}"
                   th:href="@{/notice}">
                    목록 보기
                </a>
            </div>
        </div>
    </section>

</div>
</body>
</html>

<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout :: layout(~{::title}, ~{::content}, ~{::css}, ~{::script})}">

<head>
  <!-- title fragment -->
  <title th:fragment="title">비밀번호 찾기 - LearnIT</title>

  <!--main content css-->
  <th:block th:fragment="css">
    <link rel="stylesheet" th:href="@{/css/login/login.css}">
  </th:block>
</head>

<body>

<!-- content fragment -->
<div th:fragment="content" class="login-container">
  <div class="login-box">
    <h2>비밀번호 찾기</h2>
    
    <div th:if="${error != null}" class="error-message" th:text="${error}"></div>
    <div th:if="${success != null}" class="success-message" th:text="${success}"></div>

    <!-- 비밀번호 찾기 폼 -->
    <form th:action="@{/user/find-password}" method="post" class="login-form" th:if="${success == null}">
      <div class="form-group">
        <label for="email">이메일</label>
        <input type="email" id="email" name="email" placeholder="가입하신 이메일을 입력하세요" autocomplete="username" required>
        <p class="form-help-text">입력하신 이메일로 임시 비밀번호가 발송됩니다.</p>
      </div>

      <button type="submit" class="btn-signin">임시 비밀번호 발송</button>
    </form>

    <!-- 성공 메시지 표시 후 로그인 링크 -->
    <div th:if="${success != null}" class="form-actions">
      <div class="info-box" style="background-color: #f0f7ff; border: 1px solid #0A4A7A; border-radius: 8px; padding: 16px; margin-bottom: 20px;">
        <p style="margin: 0; color: #0A4A7A; font-size: 14px; line-height: 1.6;">
          <strong>📧 이메일을 확인하세요</strong><br>
          발송된 임시 비밀번호를 복사한 후, 아래 버튼을 클릭하여 로그인 페이지로 이동하세요.<br>
          로그인 페이지에서 <strong>이메일과 임시 비밀번호</strong>를 입력하면 로그인할 수 있습니다.
        </p>
      </div>
      <a th:href="@{/login?tempPasswordSent=true}" class="btn-signin">로그인 페이지로 이동</a>
    </div>

    <!-- 로그인 링크 -->
    <div class="signup-link">
      <a th:href="@{/login}">로그인 페이지로 돌아가기</a>
    </div>
  </div>
</div>

<!--main content js-->
<th:block th:fragment="script">
</th:block>

</body>
</html>


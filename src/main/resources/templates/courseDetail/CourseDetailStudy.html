<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout :: layout(~{::title}, ~{::content}, ~{::css}, ~{::script})}">

<head>
    <title th:fragment="title">강의 상세(수강중)</title>

    <th:block th:fragment="css">
        <link rel="stylesheet" th:href="@{/css/courseDetail/courseDetail.css}">
    </th:block>
</head>

<body>
<div th:fragment="content" class="cd-wrap container">

    <div th:replace="courseDetail/fragments/detailHeader :: detailHeader(${course}, ${activeTab}, ${isLoggedIn})"></div>

    <section class="cd-body">
        <div class="cd-left">
            <th:block
                    th:replace="${activeTab == 'curriculum'}
                        ? ~{courseDetail/tabs/curriculum :: curriculumFragment(${sectionMap}, ${curriculumTotal})}
                        : (${activeTab == 'reviews'}
                            ? ~{courseDetail/tabs/reviews :: reviewsFragment(${reviews})}
                            : ~{courseDetail/tabs/intro :: introFragment(${course})})">
            </th:block>
        </div>

        <div th:replace="courseDetail/fragments/detailSidebar :: detailSidebar(${course}, ${isLoggedIn}, ${isEnrolled})"></div>
    </section>

    <!-- 모달들 필요하면 그대로 두고, 수강중 페이지는 보통 모달 없어도 됨 -->
    <div class="modal-backdrop" id="modal-cart-dup" style="display:none;">
        <div class="modal">
            <p class="modal-text">이미 담겨져있는 강의입니다.<br>장바구니로 이동하시겠습니까?</p>
            <div class="modal-actions">
                <button type="button" class="btn modal-btn secondary" id="btn-cart-dup-no">아니오</button>
                <button type="button" class="btn modal-btn" id="btn-cart-dup-yes">예</button>
            </div>
        </div>
    </div>

    <div class="modal-backdrop" id="modal-incomplete" style="display:none;">
        <div class="modal">
            <p class="modal-text">아직 미완성입니다.</p>
            <div class="modal-actions">
                <button type="button" class="btn modal-btn" id="btn-incomplete-ok">확인</button>
            </div>
        </div>
    </div>

</div>

<th:block th:fragment="script">
    <script th:src="@{/js/courseDetail/courseDetail.js}"></script>
</th:block>
</body>
</html>

<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout :: layout(~{::title}, ~{::content}, ~{::css}, ~{::script})}">

<head>
  <!-- title fragment -->
  <title th:fragment="title">learnit main</title>

  <!--main content css-->
  <th:block th:fragment="css">
    <link rel="stylesheet" th:href="@{/css/home/home.css}">
    <link rel="stylesheet" th:href="@{/css/home/main-blog.css}">
  </th:block>
</head>

<body>

<!-- content fragment -->
<div th:fragment="content" class="home-container">

  <!--1. 썸네일 배너-->
  <section class="home-section banner-section">

    <div class="banner-slider">

      <div class="banner-nav prev" data-dir="prev">
        <span class="arrow-icon"></span>
      </div>

      <div class="banner-track">
        <div class="banner-item" th:each="b : ${bannerList}">
          <a th:href="@{/CourseDetail(courseId=${b.courseId})}">
            <img th:src="${b.thumbnailUrl}" alt="강의 배너 이미지">
            <span class="banner-category" th:text="${b.categoryName}"></span>
            <div class="banner-title" th:text="${b.title}"></div>
          </a>
        </div>
      </div>

      <div class="banner-nav next" data-dir="next">
        <span class="arrow-icon"></span>
      </div>

      <div class="banner-progress">
      <span th:each="b, stat : ${bannerList}"
            th:classappend="${stat.index == 0} ? 'active'"></span>
      </div>

    </div>
  </section>

  <!--2. 인기강좌 목록-->
  <section class="home-section course-section">
    <div class="section-header">
      <h3>인기 강의</h3>
      <p>지금 가장 많은 수강생이 선택한 강의</p>
    </div>

    <div class="course-feature-layout" th:if="${courseList != null && !courseList.isEmpty()}">

      <!-- 🔥 인기 1위 -->
      <a class="course-card featured"
         th:if="${courseList.size() > 0}"
         th:href="@{/CourseDetail(courseId=${courseList[0].courseId})}">
        <div class="course-thumb">
          <img th:src="${courseList[0].thumbnailUrl}">
          <span class="course-badge">🔥 인기 1위</span>
        </div>
        <span class="course-category" th:text="${courseList[0].categoryName}"></span>
        <h4 th:text="${courseList[0].title}"></h4>
        <p th:text="${#numbers.formatInteger(courseList[0].price, 3, 'COMMA')} + '원'"></p>
      </a>

      <!-- 나머지 강의 -->
      <div class="course-sub-list">
        <a class="course-card"
           th:each="c, stat : ${courseList}"
           th:if="${stat.index > 0}"
           th:href="@{/CourseDetail(courseId=${c.courseId})}">
          <div class="course-thumb">
            <img th:src="${c.thumbnailUrl}">
            <span class="course-badge">모집중</span>
          </div>
          <span class="course-category" th:text="${c.categoryName}"></span>
          <h4 th:text="${c.title}"></h4>
          <p th:text="${#numbers.formatInteger(c.price, 3, 'COMMA')} + '원'"></p>
        </a>
      </div>

    </div>
    
    <!-- 강의가 없을 때 -->
    <div th:if="${courseList == null || courseList.isEmpty()}" class="empty-course-message">
      <p>등록된 강의가 없습니다.</p>
    </div>
  </section>

  <!--3. 커뮤니티(추후 확장 예정)-->

  <!--4. 블로그 글-->
  <section class="home-section blog-section">
    <div class="section-header">
      <h3>지금 개발 트렌드</h3>
      <p>IT 업계에서 주목받는 기술과 인사이트</p>
    </div>

    <!-- 여기 JS에서 최신 3개 글을 넣음 -->
    <div id="blogGrid" class="blog-grid"></div>
  </section>

</div>
<!--main content js-->
<th:block th:fragment="script">
  <script th:src="@{/js/home/banner.js}"></script>
  <script th:src="@{/js/home/main-blog.js}"></script>
</th:block>

</body>
</html>

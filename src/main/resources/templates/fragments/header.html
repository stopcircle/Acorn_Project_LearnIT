<!-- src/main/resources/templates/fragments/header.html -->
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="site-header" >
    <header class="site-header">
        <div class="container header-inner">

            <!-- Î™®Î∞îÏùº: ÌñÑÎ≤ÑÍ±∞ Î≤ÑÌäº -->
            <button type="button" class="menu-toggle" id="btn-menu" aria-label="Î©îÎâ¥ Ïó¥Í∏∞">
                ‚ò∞
            </button>

            <!-- Î°úÍ≥† -->
            <div class="logo">
                <a th:href="@{/home}">
                    <img th:src="@{/images/logo.png}" alt="LearnIT Î°úÍ≥†" class="logo-img">
                </a>
            </div>

            <!-- Í∞ÄÏö¥Îç∞ Î©îÎâ¥ + Í≤ÄÏÉâ -->
            <div class="header-center">
                <nav class="gnb">
                    <div class="gnb-item has-sub">
                        <a th:href="@{/lecture/list}">Í∞ïÏùòÎ™©Î°ù</a>
                        <div class="submenu">
                        <a th:each="cat : ${categories}"
                           th:text="${cat.name}"
                           th:href="@{'/course/' + ${cat.id}}">Ïπ¥ÌÖåÍ≥†Î¶¨
                        </a>
                        </div>
                    </div>

                    <a th:href="@{/quiz}" class="gnb-item">ÌÄ¥Ï¶à</a>
                    <a th:href="@{/community}" class="gnb-item">Ïª§ÎÆ§ÎãàÌã∞</a>
                </nav>

                <form class="header-search" th:action="@{/search}" method="get">
                    <input type="text" name="q" placeholder="Value" class="search-input">
                    <button type="submit" class="search-btn">üîç</button>
                </form>
            </div>

            <!-- Ïò§Î•∏Ï™Ω Î°úÍ∑∏Ïù∏ Î≤ÑÌäº -->
            <div class="header-right">
                <a th:href="@{/login}" class="login-btn">Î°úÍ∑∏Ïù∏/ÌöåÏõêÍ∞ÄÏûÖ</a>
            </div>

        </div>
    </header>

    <!-- Î™®Î∞îÏùº ÏÇ¨Ïù¥ÎìúÎ∞î(ÎìúÎ°úÏñ¥) -->
    <nav class="mobile-nav" id="mobile-nav" aria-hidden="true">
        <div class="mobile-nav__overlay" id="mobile-nav-overlay"></div>

        <div class="mobile-nav__panel">
            <div class="mobile-nav__header">
                <div class="mobile-nav__logo-wrap">
                    <img th:src="@{/images/logo.png}" alt="LearnIT Î°úÍ≥†" class="mobile-nav__logo">
                </div>

                <div class="mobile-nav__header-actions">
                    <button class="mobile-nav__login" type="button">Î°úÍ∑∏Ïù∏</button>
                    <button class="mobile-nav__close" id="mobile-nav-close" aria-label="Ïπ¥ÌÖåÍ≥†Î¶¨ Îã´Í∏∞" type="button">
                        &times;
                    </button>
                </div>
            </div>

            <ul class="mobile-nav__list">
                <li class="mobile-nav__item">
                    <button class="mobile-nav__item-header" type="button"><span>Í∞ïÏùòÎ™©Î°ù</span></button>
                </li>
                <li class="mobile-nav__item">
                    <button class="mobile-nav__item-header" type="button"><span>ÌÄ¥Ï¶à</span></button>
                </li>
                <li class="mobile-nav__item">
                    <button class="mobile-nav__item-header" type="button"><span>Ïª§ÎÆ§ÎãàÌã∞</span></button>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Ïù∏ÎùºÏù∏ JS -->
    <script th:inline="javascript">
        /*<![CDATA[*/
        document.addEventListener("DOMContentLoaded", function () {
          const btnMenu   = document.getElementById("btn-menu");
          const mobileNav = document.getElementById("mobile-nav");
          const overlay   = document.getElementById("mobile-nav-overlay");
          const btnClose  = document.getElementById("mobile-nav-close");

          function openNav() {
            if (!mobileNav) return;
            mobileNav.classList.add("is-open");
            mobileNav.setAttribute("aria-hidden", "false");
          }

          function closeNav() {
            if (!mobileNav) return;
            // Ìè¨Ïª§Ïä§Î•º Î®ºÏ†Ä Ï†úÍ±∞Ìïú ÌõÑ aria-hidden ÏÑ§Ï†ï
            if (document.activeElement && mobileNav.contains(document.activeElement)) {
              document.activeElement.blur();
            }
            mobileNav.classList.remove("is-open");
            // ÏïΩÍ∞ÑÏùò ÏßÄÏó∞ ÌõÑ aria-hidden ÏÑ§Ï†ïÌïòÏó¨ Ìè¨Ïª§Ïä§ Î¨∏Ï†ú Î∞©ÏßÄ
            setTimeout(() => {
              mobileNav.setAttribute("aria-hidden", "true");
            }, 100);
          }

          if (btnMenu)  btnMenu.addEventListener("click", openNav);
          if (overlay)  overlay.addEventListener("click", closeNav);
          if (btnClose) {
            btnClose.addEventListener("click", function() {
              closeNav();
            });
          }
        });
        /*]]>*/
    </script>

</th:block>


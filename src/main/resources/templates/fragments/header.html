<!-- src/main/resources/templates/fragments/header.html -->
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="site-header">

    <header class="site-header">
        <div class="container header-inner">

            <!-- Î™®Î∞îÏùº: ÌñÑÎ≤ÑÍ±∞ Î≤ÑÌäº -->
            <button type="button" class="menu-toggle" id="btn-menu" aria-label="Î©îÎâ¥ Ïó¥Í∏∞">
                ‚ò∞
            </button>

            <!-- Î°úÍ≥† -->
            <div class="logo">
                <a th:href="@{/home}">
                    <img th:src="@{/images/logo.png}" alt="LearnIT Î°úÍ≥†" class="logo-img">
                </a>
            </div>

            <!-- Í∞ÄÏö¥Îç∞ Î©îÎâ¥ + Í≤ÄÏÉâ -->
            <div class="header-center">
                <nav class="gnb">
                    <!-- ‚úÖ PC Í∞ïÏùòÎ™©Î°ùÎèÑ gnb-item ÎäêÎÇå ÎèôÏùºÌïòÍ≤å -->
                    <div class="gnb-item has-sub">
                        <a th:href="@{/lecture/list}" class="gnb-link">Í∞ïÏùòÎ™©Î°ù</a>

                        <div class="submenu">
                            <a th:each="cat : ${categories}"
                               th:text="${cat.name}"
                               th:href="@{'/course/' + ${cat.categoryId}}">Ïπ¥ÌÖåÍ≥†Î¶¨</a>
                        </div>
                    </div>

                    <a th:href="@{/quiz}" class="gnb-item">ÌÄ¥Ï¶à</a>
                    <a th:href="@{/community}" class="gnb-item">Ïª§ÎÆ§ÎãàÌã∞</a>
                </nav>

                <form class="header-search" th:action="@{/search}" method="get">
                    <input type="text" name="keyword" placeholder="Value" class="search-input">
                    <button type="submit" class="search-btn">üîç</button>
                </form>
            </div>

            <!-- Ïò§Î•∏Ï™Ω Î°úÍ∑∏Ïù∏ Î≤ÑÌäº -->
            <div class="header-right">
                <a th:href="@{/login}" class="login-btn">Î°úÍ∑∏Ïù∏/ÌöåÏõêÍ∞ÄÏûÖ</a>
            </div>

        </div>
    </header>

    <!-- Î™®Î∞îÏùº ÏÇ¨Ïù¥ÎìúÎ∞î(ÎìúÎ°úÏñ¥) -->
    <nav class="mobile-nav" id="mobile-nav" aria-hidden="true">
        <div class="mobile-nav__overlay" id="mobile-nav-overlay"></div>

        <div class="mobile-nav__panel">
            <div class="mobile-nav__header">
                <div class="mobile-nav__logo-wrap">
                    <img th:src="@{/images/logo.png}" alt="LearnIT Î°úÍ≥†" class="mobile-nav__logo">
                </div>

                <div class="mobile-nav__header-actions">
                    <button class="mobile-nav__login" type="button">Î°úÍ∑∏Ïù∏</button>
                    <button class="mobile-nav__close" id="mobile-nav-close" aria-label="Ïπ¥ÌÖåÍ≥†Î¶¨ Îã´Í∏∞" type="button">
                        &times;
                    </button>
                </div>
            </div>

            <ul class="mobile-nav__list">

                <!-- ‚úÖ Í∞ïÏùòÎ™©Î°ù: ÏïÑÏΩîÎîîÏñ∏ -->
                <li class="mobile-nav__item">
                    <button class="mobile-nav__item-header js-accordion-btn"
                            type="button"
                            aria-expanded="false"
                            aria-controls="mobile-cat-list">
                        <span class="mobile-nav__label">Í∞ïÏùòÎ™©Î°ù</span>

                        <!-- ‚úÖ ÌÖçÏä§Ìä∏ v ÎåÄÏã† Ïù¥ÎØ∏ÏßÄ -->
                        <img class="chev-icon"
                             th:src="@{/images/icon-admin-down-arrow.png}"
                             alt=""
                             aria-hidden="true">
                    </button>

                    <div class="mobile-nav__submenu" id="mobile-cat-list" hidden>
                        <a th:each="cat : ${categories}"
                           th:text="${cat.name}"
                           th:href="@{'/course/' + ${cat.categoryId}}">Ïπ¥ÌÖåÍ≥†Î¶¨</a>
                    </div>
                </li>

                <!-- ‚úÖ ÌÄ¥Ï¶à -->
                <li class="mobile-nav__item">
                    <a class="mobile-nav__link" th:href="@{/quiz}">
                        <span class="mobile-nav__label">ÌÄ¥Ï¶à</span>
                        <img class="chev-icon"
                             th:src="@{/images/icon-admin-down-arrow.png}"
                             alt=""
                             aria-hidden="true">
                    </a>
                </li>

                <!-- ‚úÖ Ïª§ÎÆ§ÎãàÌã∞ -->
                <li class="mobile-nav__item">
                    <a class="mobile-nav__link" th:href="@{/community}">
                        <span class="mobile-nav__label">Ïª§ÎÆ§ÎãàÌã∞</span>
                        <img class="chev-icon"
                             th:src="@{/images/icon-admin-down-arrow.png}"
                             alt=""
                             aria-hidden="true">
                    </a>
                </li>

            </ul>
        </div>
    </nav>

    <!-- Ïù∏ÎùºÏù∏ JS -->
    <script th:inline="javascript">
        /*<![CDATA[*/
        document.addEventListener("DOMContentLoaded", function () {
          const btnMenu   = document.getElementById("btn-menu");
          const mobileNav = document.getElementById("mobile-nav");
          const overlay   = document.getElementById("mobile-nav-overlay");
          const btnClose  = document.getElementById("mobile-nav-close");

          function openNav() {
            if (!mobileNav) return;
            mobileNav.classList.add("is-open");
            mobileNav.setAttribute("aria-hidden", "false");
          }

          function closeNav() {
            if (!mobileNav) return;
            mobileNav.classList.remove("is-open");
            mobileNav.setAttribute("aria-hidden", "true");
          }

          if (btnMenu)  btnMenu.addEventListener("click", openNav);
          if (overlay)  overlay.addEventListener("click", closeNav);
          if (btnClose) btnClose.addEventListener("click", closeNav);

          /* ‚úÖ Í∞ïÏùòÎ™©Î°ùÎßå ÏïÑÏΩîÎîîÏñ∏ ÌÜ†Í∏Ä */
          const accBtn = document.querySelector(".js-accordion-btn");
          if (accBtn) {
            accBtn.addEventListener("click", function () {
              const expanded = accBtn.getAttribute("aria-expanded") === "true";
              const targetId = accBtn.getAttribute("aria-controls");
              const target   = targetId ? document.getElementById(targetId) : null;

              accBtn.setAttribute("aria-expanded", String(!expanded));
              if (target) target.hidden = expanded;
            });
          }
        });
        /*]]>*/
    </script>

</th:block>
</html>
